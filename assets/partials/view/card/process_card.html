<div>

    <div class="well">
        <div style="float:left;">
            <h4>Process <i>{{processId}}</i></h4>
        </div>
        <div style="float:right;">
            <a class="btn btn-link" ng-click="back()">Back</a>
        </div>
    </div>

    <div ng-if="process.processId.length > 0">

        <div class="well">
            <div>
                <div>
                    <div style="float: left;">
                        <b>Properties:</b>
                    </div>
                    <div style="float: right; margin-bottom: 5px;">
                        <button class="btn btn-small" ng-click="recoverProcess(process.processId)"
                                popover="Submit process to recovery service" popover-trigger="mouseenter">
                            <i class="icon-retweet" />
                        </button>
                        <button class="btn btn-small" ng-click="cloneProcess(process.processId)"
                                popover="Clone process" popover-trigger="mouseenter">
                            <i class="icon-tags" />
                        </button>
                    </div>
                </div>
                <table width="100%" class="table table-condensed table-bordered table-striped" style="background-color: #fff;">
                    <tr>
                        <td class="form-header">
                            <small>Start task actor:</small>
                        </td>
                        <td>
                            <i>{{process.startTask.actorId}}</i>
                        </td>
                    </tr>
                    <tr>
                        <td class="form-header">
                            <small>Start task method:</small>
                        </td>
                        <td>
                            <i>{{ process.startTask.method }}</i>
                        </td>
                    </tr>
                    <tr>
                        <td class="form-header">
                            <small>Start task ID:</small>
                        </td>
                        <td>
                            <a ng-href="#/processes/task?processId={{process.processId}}&taskId={{process.startTaskId}}" class="btn-link">
                                <i>{{process.startTaskId}}</i>
                            </a>
                        </td>
                    </tr>
                    <tr>
                        <td class="form-header">
                            <small>Custom ID:</small>
                        </td>
                        <td>
                            <i>
                                {{process.customId}}
                            </i>
                        </td>
                    </tr>
                    <tr>
                        <td class="form-header">
                            <small>Start time:</small>
                        </td>
                        <td>
                            <i ng-if="process.startTime>0">
                                {{process.startTime | date:'dd-MM-yyyy HH:mm:ss' }}
                            </i>
                        </td>
                    </tr>
                    <tr>
                        <td class="form-header">
                            <small>End time:</small>
                        </td>
                        <td>
                            <i ng-if="process.endTime>0">
                                {{process.endTime | date:'dd-MM-yyyy HH:mm:ss' }}
                            </i>
                        </td>
                    </tr>
                    <tr>
                        <td class="form-header">
                            <small>Return value:</small>
                        </td>
                        <td>
                            <i>
                                {{process.returnValue | json}}
                            </i>
                        </td>
                    </tr>
                    <tr>
                        <td class="form-header">
                            <small>Status:</small>
                        </td>
                        <td>
                            <i>
                                {{process.state | json}}
                            </i>
                        </td>
                    </tr>
                </table>
            </div>
        </div>

        <div class="well">
            <div>
                <i class="icon-question-sign" popover="Navigate to find tasks view for the process" popover-trigger="mouseenter"></i>
                <a class="btn btn-link" ng-href="#/processes/search/task?processId={{process.processId}}">List tasks for this process <span>({{ taskTree.tasksCount }})</span></a>
            </div>
        </div>

        <div class="well">
            <div style="background-color: #f5f5f5;padding:2px;">
                <h4>Process tree: </h4>
                &#8595<i ng-class="getTreeStateIconClass(taskTree.state)" popover="{{getTreeStatePopover(taskTree.state)}}" popover-trigger="mouseenter"></i><a ng-href="#/processes/task?processId={{process.processId}}&taskId={{taskTree.id}}" class="btn btn-link"><b><small>{{taskTree.id}}</small></b></a><span class="muted">{{taskTree.desc}}</span>
                <div class="tree">
                    <ul style="border: 1px dotted grey;" ng-show="taskTree.children.length>0">
                        <li ng-repeat="child in taskTree.children" tsk-tree>
                            <div>
                                <i ng-class="getTreeStateIconClass(child.state)" popover="{{getTreeStatePopover(child.state)}}" popover-trigger="mouseenter"></i><a ng-href="#/processes/task?processId={{process.processId}}&taskId={{child.id}}" class="btn btn-link"><small>{{child.id}}</small></a>
                                <span class="muted">{{child.desc}}</span>
                            </div>
                            <ul style="border: 1px dotted grey;" ng-show="child.children.length>0">
                                <branch></branch>
                            </ul>
                    </ul>
                </div>
            </div>
        </div>
    </div>

</div>